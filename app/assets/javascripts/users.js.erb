$(document).ready(function() {
  $('.hovered img').hide();

  var audio = new Audio('/assets/music.mp3');

  $('.alert').click(function() {
    audio.pause();
  })

  $('.nav a').hover(function() {
    $(this).css('color', '#899EC9')
    $(this).css('background-image', "url(/assets/outline_t.png)").css('background-size', 'cover').css('padding-right','44px').css('padding-left', '10px')
  },
  function() {
    $(this).css('color', 'black')
     $(this).css('background-image', "none").css('background-size', 'cover').css('padding','0')
    
  })

  $('.next-image').click(function() {
    var visibleImage = $('.images-unsubscribe:visible');
    var numberImage = $(visibleImage[0]).attr('class').split(" ")[0];
    var currentNumber = /\d+/.exec(numberImage);
    var nxtNumber = parseInt(currentNumber[0]) + 1;
    
    if (currentNumber[0] == '1') {
      audio.play();
    }

    $('#background-wrap').show();
    $('body').addClass('clouds');
    $(visibleImage[0]).hide();
    if (nxtNumber == 16) {
      $('.next-image button').addClass('alert').removeClass('success');
      $('.cancel a').addClass('success').removeClass('alert');
    } 
    if (nxtNumber == 17) {
      $('.next-image').hide();
      $('.hidden-first').show();
      $('.cancel a').text('CANCEL').addClass('alert').removeClass('success');
    }
    $('.'+nxtNumber + '-image.images-unsubscribe').show();
  })

  $('.box').submit(function() {
    // banner saying we love you with their email. and confetti falling.
    // maybe even a trumpet sound or something!
    // need to check that 
    var email = $($('input[type="email"]')[0]).val()
    if (email !== "") {
      $('.conf-cont').fadeIn().next().delay(5000).fadeOut();
      setTimeout(function() {
        $('.conf-cont').fadeOut();
      }, 10000);
    } else {
      $('.flag.note.error').show();
    }
  })

  $('.submarine-hidden').click(function() {
    $('.icons').animate({
      left: "+=22%"
    }, function() {
      $('.box').css('display', 'inline-block');
    })
  })
})