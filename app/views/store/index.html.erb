<% @cart = @cart || current_cart %>
<div class="row container">
  <div class="large-12 small-12 columns">
  <div class="sign">
      <!-- <div class="neon-blue" id="title">L<span id="fade">ate</span> Nights</div> -->
      <div class="neon-blue"> <span class="neon-purple">BadComic's</span>   <span class="neon-purple" id="trav">Store</span></div>
   </div>
  <div id="checkout-tab" class="reveal-modal" data-reveal>
    <div class="row">
      <div class="large-12 small-12 columns">
        <h2>Checkout </h2>
        <div class="row">
        <% @cart.products.each do |product| %>
          <div class="large-2 small-2 columns">
            <%= image_tag product.product_image, class: 'cart-image' %>
            <span class="product-details"> <%= product.name %> | <%= product.price %></span>
          </div>
        <% end %>
        </div>
        <hr>
        <h5> Subtotal: <span class='cart-tab-price'> <%= @cart.products.map(&:price).inject(0){ |sum, i| sum + i } %> </span></h5>
        <h5> Tax: <span class='cart-tab-tax'></span></h5>
        <h5> Shipping: <span class='cart-tab-shipping'>5.00</span></h5>
        <h5> Total: <span class='cart-tab-total'></span></h5>
        <hr>
        <%= render 'form' %>
      </div>
    </div>
  </div>
  <div id="cart"> 
    <%= render 'cart', locals: {:@cart => @cart} %>
  </div>
    <br>
    <div id="masonry-container" class="transitions-enabled infinite-scroll clearfix row">
      <% @products.each_with_index do |product, index| %>
        <div class="large-4 small-6 columns product-container">
          <a href="#" data-reveal-id="<%= product.name.downcase.gsub(" ", '-' ) %>">
          <%= image_tag product.product_image, class: 'product-small' %><br>
          <%= product.name %> (<%= product.price %>)
          </a>
          <div id="<%= product.name.downcase.gsub(" ", '-' ) %>" class="reveal-modal" data-reveal>
            <%= image_tag product.image_url %>
            <h2><%= product.name %> <small><%= product.price %></small></h2>
            <p class="lead"><%= product.description %></p>
            <%= link_to 'Add to Cart', add_to_cart_path(current_cart.id, product.id, 'json'), data: {cart_id: "#{current_cart.id}", product_id: "#{product.id}"}, class: 'add-to-cart modal-cart', remote: true%>
            <a class="close-reveal-modal">&#215;</a>
          <br>
          </div>
            <%= link_to ' - Add to Cart', add_to_cart_path(current_cart.id, product.id, 'json'), data: {cart_id: "#{current_cart.id}", product_id: "#{product.id}"}, class: 'add-to-cart', remote: true%>
        </div>
    <% end %>
    </div>
  </div>
</div>